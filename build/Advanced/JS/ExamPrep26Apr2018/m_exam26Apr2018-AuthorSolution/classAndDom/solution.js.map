{"version":3,"sources":["../../../../../../Advanced/JS/ExamPrep26Apr2018/m_exam26Apr2018-AuthorSolution/classAndDom/solution.js"],"names":["PublicTransportTable","constructor","townName","changeHeaderName","addEventListeners","name","$","text","addVehicle","obj","tr","type","button","trExtra","route","price","driver","on","event","target","insertAfter","remove","td","append","typeForm","nameForm","val","rows","not","console","log","i","length","firstChild","find","eq","secondChild","includes","css","click"],"mappings":"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","file":"solution.js","sourcesContent":["class PublicTransportTable {\r\n    constructor(townName) {\r\n        this.changeHeaderName(townName)\r\n        this.addEventListeners()\r\n    }\r\n\r\n    changeHeaderName(name) {\r\n        $('caption').text(`${name}'s Public Transport`)\r\n    }\r\n\r\n    addVehicle(obj) {\r\n        let tr = $(`<tr><td>${obj.type}</td><td>${obj.name}</td>`)\r\n        let button = $('<button>More Info</button>')\r\n        let trExtra = $('<tr class=\"more-info\"><td colspan=\"3\"><table><tr>' +\r\n            `<td>Route: ${obj.route}</td></tr><tr><td>Price: ${obj.price}</td></tr>` +\r\n            `<tr><td>Driver: ${obj.driver}</td></tr></table></td></tr>`)\r\n        button.on('click', function (event) {\r\n                if ($(event.target).text() === 'More Info') {\r\n                    $(event.target).text('Less Info')\r\n                    trExtra.insertAfter(tr)\r\n                } else {\r\n                    $(event.target).text('More Info')\r\n                    trExtra.remove()\r\n                }\r\n        })\r\n        let td = $('<td>')\r\n        td.append(button)\r\n        tr.append(td)\r\n        $('.vehicles-info').append(tr)\r\n    }\r\n\r\n    addEventListeners() {\r\n        $('.search-btn').on('click', function () {\r\n            let typeForm = $('input[name=\"type\"]')\r\n            let nameForm = $('input[name=\"name\"]')\r\n            let type = typeForm.val()\r\n            let name = nameForm.val()\r\n\r\n            if (name || type) {\r\n                let rows = $('.vehicles-info > tr').not('.more-info')\r\n                console.log(rows)\r\n                for (let i = 0; i < rows.length; i++) {\r\n                    let firstChild = $(rows[i]).find('td').eq(0)\r\n                    let secondChild = $(rows[i]).find('td').eq(1)\r\n                    if(!firstChild.text().includes(type) || !secondChild.text().includes(name)) {\r\n                        $(rows[i]).css('display', 'none')\r\n                        let button = $(rows[i]).find('td').eq(2).find('button')\r\n                        if (button.text() === 'Less Info') {\r\n                            button.click()\r\n                        }\r\n                    } else {\r\n                        $(rows[i]).css('display', '')\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        $('.clear-btn').on('click', function () {\r\n            $('input[name=\"type\"]').val('')\r\n            $('input[name=\"name\"]').val('')\r\n            let rows = $('.vehicles-info > tr')\r\n            for (let i = 0; i < rows.length; i++) {\r\n                $(rows[i]).css('display', '')\r\n            }\r\n        })\r\n    }\r\n}"]}