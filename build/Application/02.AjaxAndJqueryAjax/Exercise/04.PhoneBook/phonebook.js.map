{"version":3,"sources":["../../../../../Application/02.AjaxAndJqueryAjax/Exercise/04.PhoneBook/phonebook.js"],"names":["attachEvents","BASE_URL","TABLE","$","PERSON","PHONE","on","loadContacts","createContact","ajax","method","url","then","appendContacts","catch","handleError","contacts","empty","keys","Object","id","li","text","person","phone","a","remove","append","name","val","trim","data","JSON","stringify","err","console","log"],"mappings":";;;AAAA,aAASA,YAAT,GAAwB;AACpB,cAAMC,WAAW,kDAAjB;AACA,cAAMC,QAAQC,EAAE,YAAF,CAAd;AACA,cAAMC,SAASD,EAAE,SAAF,CAAf;AACA,cAAME,QAAQF,EAAE,QAAF,CAAd;;AAEAA,UAAE,UAAF,EAAcG,EAAd,CAAiB,OAAjB,EAA0BC,YAA1B;AACAJ,UAAE,YAAF,EAAgBG,EAAhB,CAAmB,OAAnB,EAA4BE,aAA5B;;AAEA,iBAASD,YAAT,GAAwB;AACpBJ,cAAEM,IAAF,CAAO;AACHC,wBAAQ,KADL;AAEHC,qBAAKV,WAAW;AAFb,aAAP,EAGGW,IAHH,CAGQC,cAHR,EAIKC,KAJL,CAIWC,WAJX;AAKH;;AAED,iBAASF,cAAT,CAAwBG,QAAxB,EAAkC;AAC9Bd,kBAAMe,KAAN;AACA,gBAAIC,OAAOC,OAAOD,IAAP,CAAYF,QAAZ,CAAX;AACA;AACA,iBAAK,MAAMI,EAAX,IAAiBF,IAAjB,EAAuB;AACnB,oBAAIG,KAAKlB,EAAE,MAAF,CAAT;AACAkB,mBAAGC,IAAH,CAAS,GAAEN,SAASI,EAAT,EAAaG,MAAO,KAAIP,SAASI,EAAT,EAAaI,KAAM,EAAtD;AACA,oBAAIC,IAAItB,EAAE,0BAAF,CAAR;AACAsB,kBAAEnB,EAAF,CAAK,OAAL,EAAc,YAAY;AACtBH,sBAAEM,IAAF,CAAO;AACHC,gCAAQ,QADL;AAEHC,6BAAKV,WAAW,GAAX,GAAiBmB,EAAjB,GAAsB;AAFxB,qBAAP,EAGGR,IAHH,CAGQ,YAAY;AAChBS,2BAAGK,MAAH;AACH,qBALD,EAKGZ,KALH,CAKSC,WALT;AAMH,iBAPD;AAQAM,mBAAGM,MAAH,CAAUF,CAAV;AACAvB,sBAAMyB,MAAN,CAAaN,EAAb;AACH;AACJ;;AAED,iBAASb,aAAT,GAAyB;AACrB,gBAAIoB,OAAOxB,OAAOyB,GAAP,EAAX;AACA,gBAAIL,QAAQnB,MAAMwB,GAAN,EAAZ;AACA,gBAAID,KAAKE,IAAL,OAAgB,EAAhB,IAAsBN,MAAMM,IAAN,OAAiB,EAA3C,EAA+C;AAC3C3B,kBAAEM,IAAF,CAAO;AACHC,4BAAQ,MADL;AAEHC,yBAAKV,WAAW,OAFb;AAGH8B,0BAAMC,KAAKC,SAAL,CAAe,EAACL,IAAD,EAAOJ,KAAP,EAAf;AAHH,iBAAP,EAIGZ,IAJH,CAIQ,YAAY;AAChBR,2BAAOyB,GAAP,CAAW,EAAX;AACAxB,0BAAMwB,GAAN,CAAU,EAAV;AACH,iBAPD,EAOGf,KAPH,CAOSC,WAPT;AAQH;AACDX,mBAAOyB,GAAP,CAAW,EAAX;AACAxB,kBAAMwB,GAAN,CAAU,EAAV;AACH;;AAED,iBAASd,WAAT,CAAqBmB,GAArB,EAA0B;AACtBC,oBAAQC,GAAR,CAAYF,GAAZ;AACH;AACJ","file":"phonebook.js","sourcesContent":["function attachEvents() {\r\n    const BASE_URL = 'https://phonebook-nakov.firebaseio.com/phonebook';\r\n    const TABLE = $('#phonebook');\r\n    const PERSON = $('#person');\r\n    const PHONE = $('#phone');\r\n\r\n    $('#btnLoad').on('click', loadContacts);\r\n    $('#btnCreate').on('click', createContact);\r\n\r\n    function loadContacts() {\r\n        $.ajax({\r\n            method: \"GET\",\r\n            url: BASE_URL + '.json'\r\n        }).then(appendContacts)\r\n            .catch(handleError)\r\n    }\r\n\r\n    function appendContacts(contacts) {\r\n        TABLE.empty();\r\n        let keys = Object.keys(contacts);\r\n        //keys.sort((a, b) => contacts[a][\"person\"].localeCompare(contacts[b][\"person\"]))\r\n        for (const id of keys) {\r\n            let li = $('<li>');\r\n            li.text(`${contacts[id].person}: ${contacts[id].phone}`)\r\n            let a = $('<button> Delete</button>');\r\n            a.on('click', function () {\r\n                $.ajax({\r\n                    method: \"DELETE\",\r\n                    url: BASE_URL + \"/\" + id + \".json\"\r\n                }).then(function () {\r\n                    li.remove()\r\n                }).catch(handleError)\r\n            });\r\n            li.append(a);\r\n            TABLE.append(li)\r\n        }\r\n    }\r\n\r\n    function createContact() {\r\n        let name = PERSON.val();\r\n        let phone = PHONE.val();\r\n        if (name.trim() !== '' && phone.trim() !== '') {\r\n            $.ajax({\r\n                method: \"POST\",\r\n                url: BASE_URL + '.json',\r\n                data: JSON.stringify({name, phone})\r\n            }).then(function () {\r\n                PERSON.val(\"\");\r\n                PHONE.val(\"\");\r\n            }).catch(handleError)\r\n        }\r\n        PERSON.val(\"\");\r\n        PHONE.val(\"\");\r\n    }\r\n\r\n    function handleError(err) {\r\n        console.log(err)\r\n    }\r\n}"]}