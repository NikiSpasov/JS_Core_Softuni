{"version":3,"sources":["../../../../../Application/02.AjaxAndJqueryAjax/Exercise/03.Messenger/solution.js"],"names":["attachEvents","DBURL","ADDITON","SENDBTN","$","REFRESHBTN","WRAPPER","NAME","MESSAGE","on","ajax","method","url","then","messages","empty","keys","Object","sort","a","b","timestamp","message","result","author","content","append","catch","errHandler","data","JSON","stringify","val","Date","now","err","window","alert"],"mappings":";;;AAAA,aAASA,YAAT,GAAwB;AACpB,cAAMC,QAAQ,8DAAd;AACA,cAAMC,UAAW,OAAjB;AACA,cAAMC,UAAUC,EAAE,SAAF,CAAhB;AACA,cAAMC,aAAaD,EAAE,UAAF,CAAnB;AACA,cAAME,UAAUF,EAAE,WAAF,CAAhB;AACA,cAAMG,OAAOH,EAAE,SAAF,CAAb;AACA,cAAMI,UAAUJ,EAAE,UAAF,CAAhB;;AAEAC,mBAAWI,EAAX,CAAc,OAAd,EAAuB,YAAY;AAC/BL,cAAEM,IAAF,CACI;AACIC,wBAAQ,KADZ;AAEIC,qBAAKX,QAAQC;AAFjB,aADJ,EAIOW,IAJP,CAIY,UAAUC,QAAV,EACR;AACIR,wBAAQS,KAAR;AACA,oBAAIC,OAAOC,OAAOD,IAAP,CAAYF,QAAZ,CAAX;AACAE,qBAAKE,IAAL,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAUN,SAASK,CAAT,EAAYE,SAAZ,GAAwBP,SAASM,CAAT,EAAYC,SAAxD;AACA,qBAAK,IAAIC,OAAT,IAAoBN,IAApB,EAA0B;AACtB,wBAAIO,SAAU,GAAET,SAASQ,OAAT,EAAkBE,MAAO,KAAIV,SAASQ,OAAT,EAAkBG,OAAQ,KAAvE;AACAnB,4BAAQoB,MAAR,CAAeH,MAAf;AACH;AACJ,aAbL,EAaOI,KAbP,CAaaC,UAbb;AAcH,SAfD;;AAiBAzB,gBAAQM,EAAR,CAAW,OAAX,EAAoB,YAAY;AAC5BL,cAAEM,IAAF,CACI;AACIC,wBAAQ,MADZ;AAEIC,qBAAKX,QAAQC,OAFjB;AAGI2B,sBAAMC,KAAKC,SAAL,CAAe;AACjBP,4BAAQjB,KAAKyB,GAAL,EADS;AAEjBP,6BAASjB,QAAQwB,GAAR,EAFQ;AAGjBX,+BAAWY,KAAKC,GAAL;AAHM,iBAAf;AAHV,aADJ,EASOrB,IATP,CASY,UAAUC,QAAV,EACZ;AACIP,qBAAKyB,GAAL,CAAS,EAAT;AACAxB,wBAAQwB,GAAR,CAAY,EAAZ;AACH,aAbD,EAaGL,KAbH,CAaSC,UAbT;AAcH,SAfD;;AAiBA,iBAASA,UAAT,CAAqBO,GAArB,EAA0B;AACtBC,mBAAOC,KAAP,CAAa,OAAb;AACH;AACJ","file":"solution.js","sourcesContent":["function attachEvents() {\r\n    const DBURL = \"https://messenger198011.firebaseio.com/-LHrTpN65T7plreELRQs/\";\r\n    const ADDITON =  \".json\";\r\n    const SENDBTN = $(\"#submit\");\r\n    const REFRESHBTN = $(\"#refresh\");\r\n    const WRAPPER = $(\"#messages\");\r\n    const NAME = $(\"#author\");\r\n    const MESSAGE = $(\"#content\");\r\n\r\n    REFRESHBTN.on(\"click\", function () {\r\n        $.ajax(\r\n            {\r\n                method: \"GET\",\r\n                url: DBURL + ADDITON\r\n            }).then(function (messages)\r\n            {\r\n                WRAPPER.empty();\r\n                let keys = Object.keys(messages);\r\n                keys.sort((a, b) => messages[a].timestamp - messages[b].timestamp);\r\n                for (let message of keys) {\r\n                    let result = `${messages[message].author}: ${messages[message].content} \\n`;\r\n                    WRAPPER.append(result);\r\n                }\r\n            }).catch(errHandler)\r\n    });\r\n\r\n    SENDBTN.on(\"click\", function () {\r\n        $.ajax(\r\n            {\r\n                method: \"POST\",\r\n                url: DBURL + ADDITON,\r\n                data: JSON.stringify({\r\n                    author: NAME.val(),\r\n                    content: MESSAGE.val(),\r\n                    timestamp: Date.now()\r\n                })\r\n            }).then(function (messages)\r\n        {\r\n            NAME.val(\"\");\r\n            MESSAGE.val(\"\");\r\n        }).catch(errHandler)\r\n    });\r\n\r\n    function errHandler (err) {\r\n        window.alert(\"Error\");\r\n    }\r\n}"]}