{"version":3,"sources":["../../../../Application/02.AjaxAndJqueryAjax/04.PhoneBook/niki_phonebook.js"],"names":["BASE_URL","TABLE","$","PERSON","PHONE","on","loadContacts","createContact","ajax","method","url","then","appendContacts","catch","handleError","contacts","empty","keys","Object","sort","a","b","name","localeCompare","id","li","text","phone","remove","append","val","trim","data","JSON","stringify","err","console","log"],"mappings":";;;AAAA,UAAMA,WAAW,yCAAjB;AACA,UAAMC,QAAQC,EAAE,YAAF,CAAd;AACA,UAAMC,SAASD,EAAE,SAAF,CAAf;AACA,UAAME,QAAQF,EAAE,QAAF,CAAd;;AAEAA,MAAE,UAAF,EAAcG,EAAd,CAAiB,OAAjB,EAA0BC,YAA1B;AACAJ,MAAE,YAAF,EAAgBG,EAAhB,CAAmB,OAAnB,EAA4BE,aAA5B;;AAEA,aAASD,YAAT,GAAwB;AACpBJ,UAAEM,IAAF,CAAO;AACHC,oBAAQ,KADL;AAEHC,iBAAKV,WAAW;AAFb,SAAP,EAGGW,IAHH,CAGQC,cAHR,EAIKC,KAJL,CAIWC,WAJX;AAKH;;AAED,aAASF,cAAT,CAAwBG,QAAxB,EAAkC;AAC9Bd,cAAMe,KAAN;AACA,YAAIC,OAAOC,OAAOD,IAAP,CAAYF,QAAZ,CAAX;AACAE,aAAKE,IAAL,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAUN,SAASK,CAAT,EAAYE,IAAZ,CAAiBC,aAAjB,CAA+BR,SAASM,CAAT,EAAYC,IAA3C,CAApB;AACA,aAAK,MAAME,EAAX,IAAiBP,IAAjB,EAAuB;AACnB,gBAAIQ,KAAKvB,EAAE,MAAF,CAAT;AACAuB,eAAGC,IAAH,CAAS,GAAEX,SAASS,EAAT,EAAaF,IAAK,KAAIP,SAASS,EAAT,EAAaG,KAAM,EAApD;AACA,gBAAIP,IAAIlB,EAAE,0BAAF,CAAR;AACAkB,cAAEf,EAAF,CAAK,OAAL,EAAc,YAAY;AACtBH,kBAAEM,IAAF,CAAO;AACHC,4BAAQ,QADL;AAEHC,yBAAKV,WAAW,GAAX,GAAiBwB,EAAjB,GAAsB;AAFxB,iBAAP,EAGGb,IAHH,CAGQ,YAAY;AAChBc,uBAAGG,MAAH;AACH,iBALD,EAKGf,KALH,CAKSC,WALT;AAMH,aAPD;AAQAW,eAAGI,MAAH,CAAUT,CAAV;AACAnB,kBAAM4B,MAAN,CAAaJ,EAAb;AACH;AACJ;;AAED,aAASlB,aAAT,GAAyB;AACrB,YAAIe,OAAOnB,OAAO2B,GAAP,EAAX;AACA,YAAIH,QAAQvB,MAAM0B,GAAN,EAAZ;AACA,YAAIR,KAAKS,IAAL,OAAgB,EAAhB,IAAsBJ,MAAMI,IAAN,OAAiB,EAA3C,EAA+C;AAC3C7B,cAAEM,IAAF,CAAO;AACHC,wBAAQ,MADL;AAEHC,qBAAKV,WAAW,OAFb;AAGHgC,sBAAMC,KAAKC,SAAL,CAAe,EAACZ,IAAD,EAAOK,KAAP,EAAf;AAHH,aAAP,EAIGhB,IAJH,CAIQ,YAAY;AAChBR,uBAAO2B,GAAP,CAAW,EAAX;AACA1B,sBAAM0B,GAAN,CAAU,EAAV;AACH,aAPD,EAOGjB,KAPH,CAOSC,WAPT;AAQH;AACJ;;AAED,aAASA,WAAT,CAAqBqB,GAArB,EAA0B;AACtBC,gBAAQC,GAAR,CAAYF,GAAZ;AACH","file":"niki_phonebook.js","sourcesContent":["const BASE_URL = 'https://phonebook198011.firebaseio.com/';\r\nconst TABLE = $('#phonebook');\r\nconst PERSON = $('#person');\r\nconst PHONE = $('#phone');\r\n\r\n$('#btnLoad').on('click', loadContacts);\r\n$('#btnCreate').on('click', createContact);\r\n\r\nfunction loadContacts() {\r\n    $.ajax({\r\n        method: \"GET\",\r\n        url: BASE_URL + '.json'\r\n    }).then(appendContacts)\r\n        .catch(handleError)\r\n}\r\n\r\nfunction appendContacts(contacts) {\r\n    TABLE.empty();\r\n    let keys = Object.keys(contacts);\r\n    keys.sort((a, b) => contacts[a].name.localeCompare(contacts[b].name));\r\n    for (const id of keys) {\r\n        let li = $('<li>');\r\n        li.text(`${contacts[id].name}: ${contacts[id].phone}`);\r\n        let a = $('<button> Delete</button>');\r\n        a.on('click', function () {\r\n            $.ajax({\r\n                method: \"DELETE\",\r\n                url: BASE_URL + \"/\" + id + \".json\"\r\n            }).then(function () {\r\n                li.remove()\r\n            }).catch(handleError)\r\n        });\r\n        li.append(a);\r\n        TABLE.append(li)\r\n    }\r\n}\r\n\r\nfunction createContact() {\r\n    let name = PERSON.val();\r\n    let phone = PHONE.val();\r\n    if (name.trim() !== '' && phone.trim() !== '') {\r\n        $.ajax({\r\n            method: \"POST\",\r\n            url: BASE_URL + '.json',\r\n            data: JSON.stringify({name, phone})\r\n        }).then(function () {\r\n            PERSON.val(\"\");\r\n            PHONE.val(\"\");\r\n        }).catch(handleError)\r\n    }\r\n}\r\n\r\nfunction handleError(err) {\r\n    console.log(err)\r\n}"]}